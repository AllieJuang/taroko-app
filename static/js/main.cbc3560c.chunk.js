(this["webpackJsonptaroko-app"]=this["webpackJsonptaroko-app"]||[]).push([[0],{14:function(e,t,n){e.exports={contactCard:"contact-card_contactCard__3aZI5",user:"contact-card_user__2ebcX",title:"contact-card_title__t0RIJ",btns:"contact-card_btns__IEyis"}},20:function(e,t,n){e.exports={modal:"modal_modal__2bhYs",modalFade:"modal_modalFade__2afTT","fade-in":"modal_fade-in__1y9J-",modalOverlay:"modal_modalOverlay__1I_zq",modalClose:"modal_modalClose__3_-55",modalBody:"modal_modalBody__14dLr",loading:"modal_loading__2ds0Y"}},28:function(e,t,n){e.exports={inputText:"input-text_inputText__2t8VG",invalid:"input-text_invalid__3gPE-",small:"input-text_small__kn-Gl",error:"input-text_error__3_WQe"}},30:function(e,t,n){e.exports={contactList:"contact-list_contactList__2pqEQ",loading:"contact-list_loading__2f9In",list:"contact-list_list__1FYra",sort:"contact-list_sort__3WC1H"}},32:function(e,t,n){e.exports={formField:"form-field_formField__3-23z",label:"form-field_label__36nNB",required:"form-field_required__3N-hT"}},33:function(e,t,n){e.exports={header:"header_header__3wy06",navi:"header_navi__1dTxw"}},40:function(e,t,n){e.exports={button:"button_button__H5057",primary:"button_primary__3C1qu",secondary:"button_secondary__1yQBY"}},41:function(e,t,n){e.exports={contactInfo:"contact-info_contactInfo__1eWzW",btns:"contact-info_btns__1Z-Lm"}},47:function(e,t,n){e.exports={home:"home_home__rJ9X6"}},70:function(e,t){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(21),o=n.n(r),i=n(27),s=n(22),u=n(5),l="/taroko-app/",d="/taroko-app/contacts",j=n(7),b=n.n(j),f=n(40),O=n.n(f),m=n(1),p=function(e){var t=e.className,n=void 0===t?"primary":t,a=e.name,c=e.action,r=e.disabled,o=e.children;return Object(m.jsxs)("button",{type:"button",className:b()(O.a.button,O.a[n]),onClick:c,disabled:r,children:[a,o]})},_=n(2),h=n(9),v=n(6),x=n(12),C=n.n(x),N=n(17),g=n(79),T=n(78),E=n(46),P=n.n(E),y=function(e,t){var n=P.a.stringify(t,{arrayFormat:"brackets"}),a="https://taroko-contacts-server.herokuapp.com";return""!==n?"".concat(a,"/").concat(e,"?").concat(n):"".concat(a,"/").concat(e)},M=function(){var e=Object(N.a)(C.a.mark((function e(t){var n,a,c,r,o,i,s,u=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:"POST",a=u.length>2&&void 0!==u[2]?u[2]:{headers:{}},c=u.length>3&&void 0!==u[3]?u[3]:{},r=y(t,"POST"!==n?c:""),o=new Headers(Object(_.a)({"Content-Type":"application/json",Accept:"application/json"},a.headers)),i="POST"!==n?null:JSON.stringify(c),e.next=8,fetch(r,Object(_.a)(Object(_.a)({},a),{},{headers:o,method:n,body:i}));case 8:return s=e.sent,e.abrupt("return",s.json());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=n(16),A="GET_CONTACTS",D="UPDATE_CONTACT",k="ADD_CONTACT",F="DELETE_CONTACT",w=[{id:"1",first_name:"Allie",last_name:"Juang",job:"Front-end Developer",description:"Front-end Developer"},{id:"2",first_name:"Jack",last_name:"Hung",job:"Back-end Developer",description:"Back-end Developer"},{id:"3",first_name:"Leo",last_name:"Lin",job:"QA Engineer",description:"QA Engineer"},{id:"4",first_name:"Joe",last_name:"Chan",job:"PM",description:"PMPMPMPMPMPMPMPMPMPMPMPMPMPMPMPMPMPMPM"},{id:"5",first_name:"Eva",last_name:"Chang",job:"PM",description:"PMPMPMPMPMPMPMPMPMPMPMPMPMPMPMPMPMPMPM"}],S=Object(g.a)(A,(function(){return Object(N.a)(C.a.mark((function e(){var t,n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("api/contacts","GET");case 2:if(t=e.sent,n=t.statusCode,a=t.data,200===n){e.next=7;break}return e.abrupt("return",[]);case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))})),q=Object(g.a)(k,(function(e){return function(){var t=Object(N.a)(C.a.mark((function t(n){var a,c;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M("api/contacts","POST",{headers:{}},e);case 2:return a=t.sent,c=a.statusCode,a.message,t.abrupt("return",201===c);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),I=Object(g.a)(F,(function(e){return function(){var t=Object(N.a)(C.a.mark((function t(n){var a,c;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M("api/contacts/".concat(e),"DELETE");case 2:return a=t.sent,c=a.statusCode,a.message,t.abrupt("return",200===c);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),J=Object(g.a)(D,(function(e,t){return function(){var n=Object(N.a)(C.a.mark((function n(a){var c,r;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,M("api/contacts/".concat(e),"PATCH",{headers:{}},{info:t});case 2:return c=n.sent,r=c.statusCode,c.message,n.abrupt("return",201===r);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})),B={contact:Object(T.a)({GET_CONTACTS_PENDING:function(e){return Object(_.a)(Object(_.a)({},e),{},{contactsLoading:!0})},GET_CONTACTS_FULFILLED:function(e,t){return Object(_.a)(Object(_.a)({},e),{},{contacts:t.payload,contactsLoading:!1})},GET_CONTACTS_REJECTED:function(e){return alert("Server Error. So Display Mock Data"),Object(_.a)(Object(_.a)({},e),{},{contacts:w,contactsLoading:!1})},ADD_CONTACT_PENDING:function(e){return Object(_.a)(Object(_.a)({},e),{},{loading:!0})},ADD_CONTACT_FULFILLED:function(e,t){return Object(_.a)(Object(_.a)({},e),{},{doFetch:t.payload,loading:!1})},ADD_CONTACT_REJECTED:function(e){return Object(_.a)(Object(_.a)({},e),{},{doFetch:!1,loading:!1})},DELETE_CONTACT_PENDING:function(e){return Object(_.a)(Object(_.a)({},e),{},{loading:!0})},DELETE_CONTACT_FULFILLED:function(e,t){return Object(_.a)(Object(_.a)({},e),{},{doFetch:t.payload,loading:!1})},DELETE_CONTACT_REJECTED:function(e){return Object(_.a)(Object(_.a)({},e),{},{doFetch:!1,loading:!1})},UPDATE_CONTACT_PENDING:function(e){return Object(_.a)(Object(_.a)({},e),{},{loading:!0})},UPDATE_CONTACT_FULFILLED:function(e,t){return Object(_.a)(Object(_.a)({},e),{},{doFetch:t.payload,loading:!1})},UPDATE_CONTACT_REJECTED:function(e){return Object(_.a)(Object(_.a)({},e),{},{doFetch:!1,loading:!1})}},{contacts:[],doFetch:!1,contactsLoading:!1,loading:!1})},G=function(e){return e.contact},R={getContacts:S,addContact:q,deleteContact:I,updateContact:J},H=function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(i.c)(e,n.shouldHooksUpdate),c=Object(i.b)(),r=Object(L.b)(t,c);return[a,r]}(G,R)},U=n(32),V=n.n(U),Q=function(e){var t=e.label,n=e.required,a=e.children;return Object(m.jsxs)("div",{className:b()(V.a.formField),children:[Object(m.jsxs)("div",{className:b()(V.a.label),children:[Object(m.jsx)("span",{children:t}),n&&Object(m.jsx)("span",{className:b()(V.a.required),children:"*"})]}),Object(m.jsx)(m.Fragment,{children:a})]})},Z=n(51),W=n(28),Y=n.n(W),z=["className","onChangeValue","onBlurValue","validators"],X=function(e){var t=e.className,n=void 0===t?"":t,c=e.onChangeValue,r=void 0===c?function(){}:c,o=e.onBlurValue,i=void 0===o?function(){}:o,s=e.validators,u=void 0===s?[]:s,l=Object(Z.a)(e,z),d=l.type,j=void 0===d?"text":d,f=l.value,O=function(e,t){var n=Object(a.useState)(null),c=Object(v.a)(n,2),r=c[0],o=c[1],i={required:"This field is required",email:"The email format is wrong"};return[r,function(){o((function(){return null}));var n={};e.forEach((function(e){"required"!==e||t.trim()?"email"===e&&(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(t)||(n=Object(_.a)(Object(_.a)({},n),Object(h.a)({},e,i[e])))):n=Object(h.a)({},e,i[e])})),o((function(){return Object.keys(n).length>0?n:null}))},function(){return"object"===typeof r&&null!==r?Object.keys(r).map((function(e){return r[e]})).reduce((function(e,t){return"".concat(e,"\u3001").concat(t)})):""}]}(u,f),p=Object(v.a)(O,3),x=p[0],C=p[1],N=p[2],g=Object(a.useRef)(!0),T=Object(a.useRef)(!1);return Object(a.useEffect)((function(){g.current?g.current=!1:T.current&&C()}),[f]),Object(a.useEffect)((function(){r(f,x)}),[x]),Object(m.jsxs)("div",{className:b()(Y.a.inputText,Y.a[n],Object(h.a)({},Y.a.invalid,x)),children:[Object(m.jsx)("input",Object(_.a)(Object(_.a)({},l),{},{type:j,onChange:function(e){e.preventDefault();var t=e.target.value?e.target.value:"";r(t,null)},onBlur:function(){C(),T.current=!0,i(f)}})),Object(m.jsx)("div",{className:b()(Y.a.error),children:Object(m.jsx)("span",{children:N()})})]})},$=n(41),K=n.n($),ee={firstName:{value:"",error:null},lastName:{value:"",error:null},job:{value:"",error:null},description:{value:"",error:null}},te=function(e){var t=e.id,n=e.firstName,c=e.lastName,r=e.job,o=e.description,i=e.close,s=void 0===i?function(){}:i,u=H(),l=Object(v.a)(u,2),d=(l[0].loading,l[1]),j=d.addContact,f=d.updateContact,O=function(e){var t=Object(a.useState)(e),n=Object(v.a)(t,2),c=n[0],r=n[1];return[c,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r((function(a){return Object(_.a)(Object(_.a)({},a),Object(h.a)({},e,{value:t,error:n}))}))},function(e){return r((function(t){return Object(_.a)(Object(_.a)({},t),e)}))},function(e){e.current&&e.current.querySelectorAll("input").forEach((function(e){e.focus(),e.blur()}))}]}(ee),x=Object(v.a)(O,3),C=x[0],N=x[1],g=x[2],T=Object(a.useRef)(null);return Object(a.useEffect)((function(){void 0!==t&&g({firstName:{value:n||"",error:null},lastName:{value:c||"",error:null},job:{value:r||"",error:null},description:{value:o||"",error:null}})}),[t]),Object(m.jsx)("div",{className:b()(K.a.contactInfo),children:Object(m.jsxs)("form",{ref:T,children:[Object(m.jsx)(Q,{label:"First Name",required:!0,children:Object(m.jsx)(X,{value:C.firstName.value,validators:["required"],onChangeValue:function(e,t){return N("firstName",e,t)}},"firstName")}),Object(m.jsx)(Q,{label:"Last Name",required:!0,children:Object(m.jsx)(X,{value:C.lastName.value,validators:["required"],onChangeValue:function(e,t){return N("lastName",e,t)}},"lastName")}),Object(m.jsx)(Q,{label:"Job",required:!0,children:Object(m.jsx)(X,{value:C.job.value,validators:["required"],onChangeValue:function(e,t){return N("job",e,t)}},"job")}),Object(m.jsx)(Q,{label:"Description",required:!0,children:Object(m.jsx)(X,{value:C.description.value,validators:["required"],onChangeValue:function(e,t){return N("description",e,t)}},"description")}),Object(m.jsxs)("div",{className:b()(K.a.btns),children:[Object(m.jsx)(p,{name:"Cancel",className:"secondary",action:s}),Object(m.jsx)(p,{name:"Submit",className:"primary",action:function(){T.current&&T.current.querySelectorAll("input").forEach((function(e){e.focus(),e.blur()}));if(!Object.keys(C).map((function(e){return C[e].error})).some((function(e){return e}))){var e=Object.keys(C).map((function(e){return Object(h.a)({},e,C[e].value)})).reduce((function(e,t){return Object(_.a)(Object(_.a)({},e),t)})),n={first_name:e.firstName,last_name:e.lastName,job:e.job,description:e.description};void 0!==t?f(t,n):j(n)}}})]})]})})},ne=n(20),ae=n.n(ne),ce=document.getElementById("modal-root"),re=Object(a.forwardRef)((function(e,t){var n=e.className,c=void 0===n?"":n,o=e.children,i=e.fade,s=void 0===i||i,u=e.defaultOpened,l=void 0!==u&&u,d=e.hasBackdrop,j=void 0!==d&&d,f=e.disableClose,O=void 0===f||f,p=Object(a.useState)(l),_=Object(v.a)(p,2),x=_[0],C=_[1],N=Object(a.useCallback)((function(){return C(!1)}),[]);Object(a.useImperativeHandle)(t,(function(){return{open:function(){return C(!0)},close:N}}),[N]);var g=Object(a.useCallback)((function(e){27===e.keyCode&&N()}),[N]);return Object(a.useEffect)((function(){return x&&document.addEventListener("keydown",g,!1),function(){document.removeEventListener("keydown",g,!1)}}),[g,x]),Object(r.createPortal)(x?Object(m.jsxs)("div",{className:b()(ae.a.modal,ae.a[c],Object(h.a)({},ae.a.modalFade,s)),children:[Object(m.jsx)("div",{className:b()(ae.a.modalOverlay),onClick:function(){j&&N()}}),!O&&Object(m.jsx)("span",{role:"button",className:b()(ae.a.modalClose),"aria-label":"close",onClick:N,children:"x"}),Object(m.jsx)("div",{className:b()(ae.a.modalBody),children:o})]}):Object(m.jsx)(m.Fragment,{}),ce)})),oe=n(33),ie=n.n(oe),se=function(){var e=Object(u.f)().pathname,t=Object(a.useRef)(null);return Object(m.jsxs)("div",{className:ie.a.header,children:[Object(m.jsx)("div",{children:e===l?Object(m.jsx)(s.b,{className:ie.a.navi,to:d,exact:!0,children:"Home Page"}):Object(m.jsx)(s.b,{className:ie.a.navi,to:l,exact:!0,children:"Contact List"})}),e===d&&Object(m.jsx)(p,{name:"Add Contact",className:"primary",action:function(){t.current&&t.current.open()}}),Object(m.jsx)(re,{ref:t,children:Object(m.jsx)(te,{close:function(){t.current&&t.current.close()}})})]})},ue=n(19),le=n(24),de=n(14),je=n.n(de),be=function(e){var t=e.id,n=e.first_name,c=e.last_name,r=e.job,o=e.description,i=H(),s=Object(v.a)(i,2),u=(s[0].loading,s[1].deleteContact),l=function(){var e=window.matchMedia("(max-width: 799px)"),t=window.matchMedia("(max-width: 1279px) and (min-width: 800px)"),n=window.matchMedia("(min-width: 1280px)"),c="desktop";e.matches&&(c="mobile"),t.matches&&(c="tablet");var r=Object(a.useState)(c),o=Object(v.a)(r,2),i=o[0],s=o[1],u=function(e){return function(t){t.matches&&e!==i&&s(e)}};return Object(a.useEffect)((function(){var a=u("mobile"),c=u("tablet"),r=u("desktop");return e.addListener(a),t.addListener(c),n.addListener(r),function(){e.removeListener(a),t.removeListener(c),n.removeListener(r)}}),[i]),i}(),d=Object(a.useRef)(null),j=function(){d.current&&d.current.open()};return Object(m.jsxs)("div",{className:je.a.contactCard,children:[Object(m.jsxs)("div",{className:je.a.user,children:[Object(m.jsx)(le.a,{icon:ue.e}),Object(m.jsxs)("span",{children:[c," ",n]})]}),Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:je.a.title,children:"Job"}),Object(m.jsx)("span",{className:je.a.value,children:r})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:je.a.title,children:"Description"}),Object(m.jsx)("span",{className:je.a.value,children:o})]})]}),Object(m.jsx)("div",{className:je.a.btns,children:"mobile"!==l?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p,{name:"Edit",className:"primary",action:function(){return j()}}),Object(m.jsx)(p,{name:"Delete",className:"secondary",action:function(){return u(t)}})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(le.a,{icon:ue.a,onClick:function(){return j()}}),Object(m.jsx)(le.a,{icon:ue.d,onClick:function(){return u(t)}})]})}),Object(m.jsx)(re,{ref:d,children:Object(m.jsx)(te,{id:t,firstName:n,lastName:c,job:r,description:o,close:function(){d.current&&d.current.close()}})})]})},fe=n(30),Oe=n.n(fe),me=function(){var e=H(),t=Object(v.a)(e,2),n=t[0],c=n.contactsLoading,r=n.contacts,o=n.doFetch,i=t[1].getContacts,s=Object(a.useState)("ASC"),u=Object(v.a)(s,2),l=u[0],d=u[1],j=Object(a.useMemo)((function(){return r.sort((function(e,t){return"ASC"===l?e.first_name.localeCompare(t.first_name):t.first_name.localeCompare(e.first_name)}))}),[l,r]);return Object(a.useEffect)((function(){console.log(123),i()}),[]),Object(a.useEffect)((function(){o&&i()}),[o]),Object(m.jsxs)("div",{className:Oe.a.contactList,children:[Object(m.jsx)("h1",{children:"Contacts"}),c?Object(m.jsx)("div",{className:Oe.a.loading,children:"Loading..."}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:Oe.a.list,children:j.map((function(e){return Object(m.jsx)(be,Object(_.a)({},e),e.id)}))}),Object(m.jsx)(le.a,{icon:"ASC"===l?ue.b:ue.c,className:Oe.a.sort,onClick:function(){d("ASC"===l?"DESC":"ASC")}})]})]})},pe=n(47),_e=n.n(pe),he=function(){return Object(m.jsxs)("div",{className:_e.a.home,children:[Object(m.jsx)("h1",{children:"This is Home Page : )"}),Object(m.jsx)("p",{children:"Click Home Page on top-left to Contact List.  "})]})};var ve=function(){return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(se,{}),Object(m.jsxs)(u.c,{children:[Object(m.jsx)(u.a,{exact:!0,path:l,children:Object(m.jsx)(he,{})}),Object(m.jsx)(u.a,{path:d,children:Object(m.jsx)(me,{})})]})]})},xe=(n(75),n(48)),Ce=n.n(xe),Ne=n(49),ge=n(50),Te=n.n(ge),Ee=Object(L.c)(Object(_.a)({},B)),Pe=[Ce.a,Ne.a,Te.a],ye=Object(L.d)(Ee,L.a.apply(void 0,Pe)),Me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,80)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(i.a,{store:ye,children:Object(m.jsx)(s.a,{children:Object(m.jsx)(ve,{})})})}),document.getElementById("root")),Me()}},[[76,1,2]]]);
//# sourceMappingURL=main.cbc3560c.chunk.js.map